{"format_version":"1.2","terraform_version":"1.9.5","variables":{"hubcidr":{"value":"10.178.0.0/20"},"metastoreip":{"value":null},"rglocation":{"value":"uksouth"},"spokecidr":{"value":"10.179.0.0/20"},"subscription_id":{"value":"f3ea9166-fb51-4a5e-b2ac-ea8118ef43ba"},"tags":{"value":{"Owner":"saqib.tamli@clearpeaks.com","Project":"Databricks Infra","Project-Type":"POC","Requestor":"saqib.tamli@clearpeaks.com","Team":"BDC","createdBy":"saqib.tamli@clearpeaks.com","createdByTerraform":"True"}},"workspace_prefix":{"value":"digital"}},"planned_values":{"root_module":{"child_modules":[{"resources":[{"address":"module.hub.azurerm_firewall.hubfw","mode":"managed","type":"azurerm_firewall","name":"hubfw","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"dns_servers":null,"firewall_policy_id":null,"ip_configuration":[{"name":"configuration"}],"location":"uksouth","management_ip_configuration":[],"name":"hubfirewall","private_ip_ranges":null,"sku_name":"AZFW_VNet","sku_tier":"Standard","tags":null,"timeouts":null,"virtual_hub":[],"zones":null},"sensitive_values":{"ip_configuration":[{}],"management_ip_configuration":[],"virtual_hub":[]}},{"address":"module.hub.azurerm_public_ip.fwpublicip","mode":"managed","type":"azurerm_public_ip","name":"fwpublicip","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"allocation_method":"Static","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":null,"domain_name_label_scope":null,"edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"uksouth","name":"hubfirewallpublicip","public_ip_prefix_id":null,"reverse_fqdn":null,"sku":"Standard","sku_tier":"Regional","tags":null,"timeouts":null,"zones":null},"sensitive_values":{}},{"address":"module.hub.azurerm_resource_group.this","mode":"managed","type":"azurerm_resource_group","name":"this","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"uksouth","managed_by":null,"timeouts":null},"sensitive_values":{"tags":{}}},{"address":"module.hub.azurerm_subnet.hubfw","mode":"managed","type":"azurerm_subnet","name":"hubfw","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_prefixes":["10.178.0.0/22"],"default_outbound_access_enabled":true,"delegation":[],"name":"AzureFirewallSubnet","private_endpoint_network_policies":"Disabled","private_link_service_network_policies_enabled":true,"service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null},"sensitive_values":{"address_prefixes":[false],"delegation":[]}},{"address":"module.hub.azurerm_virtual_network.hubvnet","mode":"managed","type":"azurerm_virtual_network","name":"hubvnet","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_space":["10.178.0.0/20"],"bgp_community":null,"ddos_protection_plan":[],"edge_zone":null,"encryption":[],"flow_timeout_in_minutes":null,"location":"uksouth","private_endpoint_vnet_policies":"Disabled","timeouts":null},"sensitive_values":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":[],"encryption":[],"subnet":[],"tags":{}}},{"address":"module.hub.random_string.naming","mode":"managed","type":"random_string","name":"naming","provider_name":"registry.terraform.io/hashicorp/random","schema_version":2,"values":{"keepers":null,"length":6,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"numeric":true,"override_special":null,"special":false,"upper":false},"sensitive_values":{}}],"address":"module.hub"},{"resources":[{"address":"module.spoke.azurerm_databricks_workspace.this","mode":"managed","type":"azurerm_databricks_workspace","name":"this","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"access_connector_id":null,"custom_parameters":[{"machine_learning_workspace_id":null,"no_public_ip":true}],"customer_managed_key_enabled":true,"default_storage_firewall_enabled":null,"enhanced_security_compliance":[],"infrastructure_encryption_enabled":false,"load_balancer_backend_address_pool_id":null,"location":"uksouth","managed_disk_cmk_key_vault_id":null,"managed_disk_cmk_key_vault_key_id":null,"managed_disk_cmk_rotation_to_latest_version_enabled":null,"managed_services_cmk_key_vault_id":null,"managed_services_cmk_key_vault_key_id":null,"network_security_group_rules_required":"NoAzureDatabricksRules","public_network_access_enabled":false,"sku":"premium","timeouts":null},"sensitive_values":{"custom_parameters":[{}],"enhanced_security_compliance":[],"managed_disk_identity":[],"storage_account_identity":[],"tags":{}}},{"address":"module.spoke.azurerm_firewall_application_rule_collection.adbfqdn","mode":"managed","type":"azurerm_firewall_application_rule_collection","name":"adbfqdn","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"action":"Allow","azure_firewall_name":"hubfirewall","name":"adbcontrolplanefqdn","priority":200,"rule":[{"description":null,"fqdn_tags":null,"name":"databricks-control-plane-services","protocol":[{"port":443,"type":"Https"}],"source_addresses":["10.179.0.0/23","10.179.2.0/23"],"source_ip_groups":null}],"timeouts":null},"sensitive_values":{"rule":[{"protocol":[{}],"source_addresses":[false,false],"target_fqdns":[]}]}},{"address":"module.spoke.azurerm_firewall_network_rule_collection.adbfnetwork","mode":"managed","type":"azurerm_firewall_network_rule_collection","name":"adbfnetwork","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"action":"Allow","azure_firewall_name":"hubfirewall","name":"adbcontrolplanenetwork","priority":200,"rule":[{"description":null,"destination_addresses":[""],"destination_fqdns":null,"destination_ip_groups":null,"destination_ports":["3306"],"name":"databricks-metastore","protocols":["TCP"],"source_addresses":["10.179.0.0/23","10.179.2.0/23"],"source_ip_groups":null}],"timeouts":null},"sensitive_values":{"rule":[{"destination_addresses":[false],"destination_ports":[false],"protocols":[false],"source_addresses":[false,false]}]}},{"address":"module.spoke.azurerm_network_interface.testvmnic","mode":"managed","type":"azurerm_network_interface","name":"testvmnic","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"accelerated_networking_enabled":false,"auxiliary_mode":null,"auxiliary_sku":null,"dns_servers":null,"edge_zone":null,"internal_dns_name_label":null,"ip_configuration":[{"name":"testvmip","private_ip_address_allocation":"Dynamic","private_ip_address_version":"IPv4"}],"ip_forwarding_enabled":false,"location":"uksouth","tags":null,"timeouts":null},"sensitive_values":{"applied_dns_servers":[],"ip_configuration":[{}],"private_ip_addresses":[]}},{"address":"module.spoke.azurerm_network_interface_security_group_association.testvmnsgassoc","mode":"managed","type":"azurerm_network_interface_security_group_association","name":"testvmnsgassoc","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"timeouts":null},"sensitive_values":{}},{"address":"module.spoke.azurerm_network_security_group.testvm-nsg","mode":"managed","type":"azurerm_network_security_group","name":"testvm-nsg","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"uksouth","timeouts":null},"sensitive_values":{"security_rule":[],"tags":{}}},{"address":"module.spoke.azurerm_network_security_group.this","mode":"managed","type":"azurerm_network_security_group","name":"this","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"uksouth","timeouts":null},"sensitive_values":{"security_rule":[],"tags":{}}},{"address":"module.spoke.azurerm_network_security_rule.aad","mode":"managed","type":"azurerm_network_security_rule","name":"aad","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"access":"Allow","description":null,"destination_address_prefix":"AzureActiveDirectory","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":"443","destination_port_ranges":null,"direction":"Outbound","name":"AllowAAD","priority":200,"protocol":"Tcp","source_address_prefix":"VirtualNetwork","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"sensitive_values":{}},{"address":"module.spoke.azurerm_network_security_rule.azfrontdoor","mode":"managed","type":"azurerm_network_security_rule","name":"azfrontdoor","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"access":"Allow","description":null,"destination_address_prefix":"AzureFrontDoor.Frontend","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":"443","destination_port_ranges":null,"direction":"Outbound","name":"AllowAzureFrontDoor","priority":201,"protocol":"Tcp","source_address_prefix":"VirtualNetwork","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"sensitive_values":{}},{"address":"module.spoke.azurerm_network_security_rule.test0","mode":"managed","type":"azurerm_network_security_rule","name":"test0","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"access":"Allow","description":null,"destination_address_prefix":"VirtualNetwork","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":"3389","destination_port_ranges":null,"direction":"Inbound","name":"RDP","priority":200,"protocol":"Tcp","source_address_prefix":null,"source_address_prefixes":["94.205.157.11"],"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"sensitive_values":{"source_address_prefixes":[false]}},{"address":"module.spoke.azurerm_private_dns_zone.dnsdbfs_blob","mode":"managed","type":"azurerm_private_dns_zone","name":"dnsdbfs_blob","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"name":"privatelink.blob.core.windows.net","tags":null,"timeouts":null},"sensitive_values":{"soa_record":[]}},{"address":"module.spoke.azurerm_private_dns_zone.dnsdbfs_dfs","mode":"managed","type":"azurerm_private_dns_zone","name":"dnsdbfs_dfs","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"name":"privatelink.dfs.core.windows.net","tags":null,"timeouts":null},"sensitive_values":{"soa_record":[]}},{"address":"module.spoke.azurerm_private_dns_zone.dnsdpcp","mode":"managed","type":"azurerm_private_dns_zone","name":"dnsdpcp","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"name":"privatelink.azuredatabricks.net","tags":null,"timeouts":null},"sensitive_values":{"soa_record":[]}},{"address":"module.spoke.azurerm_private_dns_zone_virtual_network_link.dbfsdnszonevnetlink_blob","mode":"managed","type":"azurerm_private_dns_zone_virtual_network_link","name":"dbfsdnszonevnetlink_blob","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"name":"dbfsspokevnetconnection-blob","private_dns_zone_name":"privatelink.blob.core.windows.net","registration_enabled":false,"tags":null,"timeouts":null},"sensitive_values":{}},{"address":"module.spoke.azurerm_private_dns_zone_virtual_network_link.dbfsdnszonevnetlink_dfs","mode":"managed","type":"azurerm_private_dns_zone_virtual_network_link","name":"dbfsdnszonevnetlink_dfs","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"name":"dbfsspokevnetconnection-dfs","private_dns_zone_name":"privatelink.dfs.core.windows.net","registration_enabled":false,"tags":null,"timeouts":null},"sensitive_values":{}},{"address":"module.spoke.azurerm_private_dns_zone_virtual_network_link.dpcpdnszonevnetlink","mode":"managed","type":"azurerm_private_dns_zone_virtual_network_link","name":"dpcpdnszonevnetlink","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"name":"dpcpspokevnetconnection","private_dns_zone_name":"privatelink.azuredatabricks.net","registration_enabled":false,"tags":null,"timeouts":null},"sensitive_values":{}},{"address":"module.spoke.azurerm_private_endpoint.auth","mode":"managed","type":"azurerm_private_endpoint","name":"auth","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"custom_network_interface_name":null,"ip_configuration":[],"location":"uksouth","name":"aadauthpvtendpoint","private_dns_zone_group":[{"name":"private-dns-zone-auth"}],"private_service_connection":[{"is_manual_connection":false,"name":"ple-digital-auth","private_connection_resource_alias":null,"request_message":null,"subresource_names":["browser_authentication"]}],"tags":null,"timeouts":null},"sensitive_values":{"custom_dns_configs":[],"ip_configuration":[],"network_interface":[],"private_dns_zone_configs":[],"private_dns_zone_group":[{"private_dns_zone_ids":[]}],"private_service_connection":[{"subresource_names":[false]}]}},{"address":"module.spoke.azurerm_private_endpoint.dbfspe_blob","mode":"managed","type":"azurerm_private_endpoint","name":"dbfspe_blob","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"custom_network_interface_name":null,"ip_configuration":[],"location":"uksouth","name":"dbfspvtendpoint-blob","private_dns_zone_group":[{"name":"private-dns-zone-dbfs"}],"private_service_connection":[{"is_manual_connection":false,"name":"ple-digital-dbfs-blob","private_connection_resource_alias":null,"request_message":null,"subresource_names":["blob"]}],"tags":null,"timeouts":null},"sensitive_values":{"custom_dns_configs":[],"ip_configuration":[],"network_interface":[],"private_dns_zone_configs":[],"private_dns_zone_group":[{"private_dns_zone_ids":[]}],"private_service_connection":[{"subresource_names":[false]}]}},{"address":"module.spoke.azurerm_private_endpoint.dbfspe_dfs","mode":"managed","type":"azurerm_private_endpoint","name":"dbfspe_dfs","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"custom_network_interface_name":null,"ip_configuration":[],"location":"uksouth","name":"dbfspvtendpoint-dfs","private_dns_zone_group":[{"name":"private-dns-zone-dbfs"}],"private_service_connection":[{"is_manual_connection":false,"name":"ple-digital-dbfs-dfs","private_connection_resource_alias":null,"request_message":null,"subresource_names":["dfs"]}],"tags":null,"timeouts":null},"sensitive_values":{"custom_dns_configs":[],"ip_configuration":[],"network_interface":[],"private_dns_zone_configs":[],"private_dns_zone_group":[{"private_dns_zone_ids":[]}],"private_service_connection":[{"subresource_names":[false]}]}},{"address":"module.spoke.azurerm_private_endpoint.dpcp","mode":"managed","type":"azurerm_private_endpoint","name":"dpcp","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"custom_network_interface_name":null,"ip_configuration":[],"location":"uksouth","name":"dpcppvtendpoint","private_dns_zone_group":[{"name":"private-dns-zone-dpcp"}],"private_service_connection":[{"is_manual_connection":false,"name":"ple-digital-dpcp","private_connection_resource_alias":null,"request_message":null,"subresource_names":["databricks_ui_api"]}],"tags":null,"timeouts":null},"sensitive_values":{"custom_dns_configs":[],"ip_configuration":[],"network_interface":[],"private_dns_zone_configs":[],"private_dns_zone_group":[{"private_dns_zone_ids":[]}],"private_service_connection":[{"subresource_names":[false]}]}},{"address":"module.spoke.azurerm_public_ip.testvmpublicip","mode":"managed","type":"azurerm_public_ip","name":"testvmpublicip","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"allocation_method":"Static","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":null,"domain_name_label_scope":null,"edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"uksouth","public_ip_prefix_id":null,"reverse_fqdn":null,"sku":"Standard","sku_tier":"Regional","tags":null,"timeouts":null,"zones":null},"sensitive_values":{}},{"address":"module.spoke.azurerm_resource_group.this","mode":"managed","type":"azurerm_resource_group","name":"this","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"uksouth","managed_by":null,"timeouts":null},"sensitive_values":{"tags":{}}},{"address":"module.spoke.azurerm_route_table.adbroute","mode":"managed","type":"azurerm_route_table","name":"adbroute","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"bgp_route_propagation_enabled":true,"location":"uksouth","name":"spoke-routetable","route":[{"address_prefix":"0.0.0.0/0","name":"to-firewall","next_hop_type":"VirtualAppliance"}],"tags":null,"timeouts":null},"sensitive_values":{"route":[{}],"subnets":[]}},{"address":"module.spoke.azurerm_subnet.plsubnet","mode":"managed","type":"azurerm_subnet","name":"plsubnet","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_prefixes":["10.179.4.0/23"],"default_outbound_access_enabled":true,"delegation":[],"private_endpoint_network_policies":"Enabled","private_link_service_network_policies_enabled":true,"service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null},"sensitive_values":{"address_prefixes":[false],"delegation":[]}},{"address":"module.spoke.azurerm_subnet.private","mode":"managed","type":"azurerm_subnet","name":"private","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_prefixes":["10.179.2.0/23"],"default_outbound_access_enabled":true,"delegation":[{"name":"databricks","service_delegation":[{"actions":["Microsoft.Network/virtualNetworks/subnets/join/action","Microsoft.Network/virtualNetworks/subnets/prepareNetworkPolicies/action","Microsoft.Network/virtualNetworks/subnets/unprepareNetworkPolicies/action"],"name":"Microsoft.Databricks/workspaces"}]}],"private_endpoint_network_policies":"Enabled","private_link_service_network_policies_enabled":true,"service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null},"sensitive_values":{"address_prefixes":[false],"delegation":[{"service_delegation":[{"actions":[false,false,false]}]}]}},{"address":"module.spoke.azurerm_subnet.public","mode":"managed","type":"azurerm_subnet","name":"public","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_prefixes":["10.179.0.0/23"],"default_outbound_access_enabled":true,"delegation":[{"name":"databricks","service_delegation":[{"actions":["Microsoft.Network/virtualNetworks/subnets/join/action","Microsoft.Network/virtualNetworks/subnets/prepareNetworkPolicies/action","Microsoft.Network/virtualNetworks/subnets/unprepareNetworkPolicies/action"],"name":"Microsoft.Databricks/workspaces"}]}],"private_endpoint_network_policies":"Disabled","private_link_service_network_policies_enabled":true,"service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null},"sensitive_values":{"address_prefixes":[false],"delegation":[{"service_delegation":[{"actions":[false,false,false]}]}]}},{"address":"module.spoke.azurerm_subnet.testvmsubnet","mode":"managed","type":"azurerm_subnet","name":"testvmsubnet","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_prefixes":["10.179.6.0/23"],"default_outbound_access_enabled":true,"delegation":[],"private_endpoint_network_policies":"Disabled","private_link_service_network_policies_enabled":true,"service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null},"sensitive_values":{"address_prefixes":[false],"delegation":[]}},{"address":"module.spoke.azurerm_subnet_network_security_group_association.private","mode":"managed","type":"azurerm_subnet_network_security_group_association","name":"private","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"timeouts":null},"sensitive_values":{}},{"address":"module.spoke.azurerm_subnet_network_security_group_association.public","mode":"managed","type":"azurerm_subnet_network_security_group_association","name":"public","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"timeouts":null},"sensitive_values":{}},{"address":"module.spoke.azurerm_subnet_route_table_association.privateudr","mode":"managed","type":"azurerm_subnet_route_table_association","name":"privateudr","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"timeouts":null},"sensitive_values":{}},{"address":"module.spoke.azurerm_subnet_route_table_association.publicudr","mode":"managed","type":"azurerm_subnet_route_table_association","name":"publicudr","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"timeouts":null},"sensitive_values":{}},{"address":"module.spoke.azurerm_virtual_network.this","mode":"managed","type":"azurerm_virtual_network","name":"this","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_space":["10.179.0.0/20"],"bgp_community":null,"ddos_protection_plan":[],"edge_zone":null,"encryption":[],"flow_timeout_in_minutes":null,"location":"uksouth","private_endpoint_vnet_policies":"Disabled","timeouts":null},"sensitive_values":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":[],"encryption":[],"subnet":[],"tags":{}}},{"address":"module.spoke.azurerm_virtual_network_peering.hubvnet","mode":"managed","type":"azurerm_virtual_network_peering","name":"hubvnet","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"allow_forwarded_traffic":false,"allow_gateway_transit":false,"allow_virtual_network_access":true,"local_subnet_names":null,"name":"peerhubtospoke","only_ipv6_peering_enabled":null,"peer_complete_virtual_networks_enabled":true,"remote_subnet_names":null,"timeouts":null,"triggers":null,"use_remote_gateways":false},"sensitive_values":{}},{"address":"module.spoke.azurerm_virtual_network_peering.spokevnet","mode":"managed","type":"azurerm_virtual_network_peering","name":"spokevnet","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"allow_forwarded_traffic":false,"allow_gateway_transit":false,"allow_virtual_network_access":true,"local_subnet_names":null,"name":"peerspoketohub","only_ipv6_peering_enabled":null,"peer_complete_virtual_networks_enabled":true,"remote_subnet_names":null,"timeouts":null,"triggers":null,"use_remote_gateways":false},"sensitive_values":{}},{"address":"module.spoke.azurerm_windows_virtual_machine.testvm","mode":"managed","type":"azurerm_windows_virtual_machine","name":"testvm","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"additional_capabilities":[],"additional_unattend_content":[],"admin_password":"TesTed567!!!","admin_username":"azureuser","allow_extension_operations":true,"availability_set_id":null,"boot_diagnostics":[],"bypass_platform_safety_checks_on_user_schedule_enabled":false,"capacity_reservation_group_id":null,"custom_data":null,"dedicated_host_group_id":null,"dedicated_host_id":null,"edge_zone":null,"enable_automatic_updates":true,"encryption_at_host_enabled":null,"eviction_policy":null,"extensions_time_budget":"PT1H30M","gallery_application":[],"hotpatching_enabled":false,"identity":[],"license_type":null,"location":"uksouth","max_bid_price":-1,"os_disk":[{"caching":"ReadWrite","diff_disk_settings":[],"disk_encryption_set_id":null,"secure_vm_disk_encryption_set_id":null,"security_encryption_type":null,"storage_account_type":"Standard_LRS","write_accelerator_enabled":false}],"os_image_notification":[],"patch_assessment_mode":"ImageDefault","patch_mode":"AutomaticByOS","plan":[],"platform_fault_domain":-1,"priority":"Regular","provision_vm_agent":true,"proximity_placement_group_id":null,"reboot_setting":null,"secret":[],"secure_boot_enabled":null,"size":"Standard_F4s_v2","source_image_id":null,"source_image_reference":[{"offer":"windows-10","publisher":"MicrosoftWindowsDesktop","sku":"19h2-pro-g2","version":"latest"}],"tags":null,"timeouts":null,"timezone":null,"user_data":null,"virtual_machine_scale_set_id":null,"vm_agent_platform_updates_enabled":false,"vtpm_enabled":null,"winrm_listener":[],"zone":null},"sensitive_values":{"additional_capabilities":[],"additional_unattend_content":[],"admin_password":true,"boot_diagnostics":[],"custom_data":true,"gallery_application":[],"identity":[],"network_interface_ids":[],"os_disk":[{"diff_disk_settings":[]}],"os_image_notification":[],"plan":[],"private_ip_addresses":[],"public_ip_addresses":[],"secret":[],"source_image_reference":[{}],"termination_notification":[],"winrm_listener":[]}},{"address":"module.spoke.random_string.naming","mode":"managed","type":"random_string","name":"naming","provider_name":"registry.terraform.io/hashicorp/random","schema_version":2,"values":{"keepers":null,"length":6,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"numeric":true,"override_special":null,"special":false,"upper":false},"sensitive_values":{}}],"address":"module.spoke"}]}},"resource_changes":[{"address":"module.hub.azurerm_firewall.hubfw","module_address":"module.hub","mode":"managed","type":"azurerm_firewall","name":"hubfw","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"dns_servers":null,"firewall_policy_id":null,"ip_configuration":[{"name":"configuration"}],"location":"uksouth","management_ip_configuration":[],"name":"hubfirewall","private_ip_ranges":null,"sku_name":"AZFW_VNet","sku_tier":"Standard","tags":null,"timeouts":null,"virtual_hub":[],"zones":null},"after_unknown":{"dns_proxy_enabled":true,"id":true,"ip_configuration":[{"private_ip_address":true,"public_ip_address_id":true,"subnet_id":true}],"management_ip_configuration":[],"resource_group_name":true,"threat_intel_mode":true,"virtual_hub":[]},"before_sensitive":false,"after_sensitive":{"ip_configuration":[{}],"management_ip_configuration":[],"virtual_hub":[]}}},{"address":"module.hub.azurerm_public_ip.fwpublicip","module_address":"module.hub","mode":"managed","type":"azurerm_public_ip","name":"fwpublicip","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"allocation_method":"Static","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":null,"domain_name_label_scope":null,"edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"uksouth","name":"hubfirewallpublicip","public_ip_prefix_id":null,"reverse_fqdn":null,"sku":"Standard","sku_tier":"Regional","tags":null,"timeouts":null,"zones":null},"after_unknown":{"fqdn":true,"id":true,"ip_address":true,"resource_group_name":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.hub.azurerm_resource_group.this","module_address":"module.hub","mode":"managed","type":"azurerm_resource_group","name":"this","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"uksouth","managed_by":null,"timeouts":null},"after_unknown":{"id":true,"name":true,"tags":true},"before_sensitive":false,"after_sensitive":{"tags":{}}}},{"address":"module.hub.azurerm_subnet.hubfw","module_address":"module.hub","mode":"managed","type":"azurerm_subnet","name":"hubfw","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_prefixes":["10.178.0.0/22"],"default_outbound_access_enabled":true,"delegation":[],"name":"AzureFirewallSubnet","private_endpoint_network_policies":"Disabled","private_link_service_network_policies_enabled":true,"service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null},"after_unknown":{"address_prefixes":[false],"delegation":[],"id":true,"resource_group_name":true,"virtual_network_name":true},"before_sensitive":false,"after_sensitive":{"address_prefixes":[false],"delegation":[]}}},{"address":"module.hub.azurerm_virtual_network.hubvnet","module_address":"module.hub","mode":"managed","type":"azurerm_virtual_network","name":"hubvnet","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_space":["10.178.0.0/20"],"bgp_community":null,"ddos_protection_plan":[],"edge_zone":null,"encryption":[],"flow_timeout_in_minutes":null,"location":"uksouth","private_endpoint_vnet_policies":"Disabled","timeouts":null},"after_unknown":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":true,"encryption":[],"guid":true,"id":true,"name":true,"resource_group_name":true,"subnet":true,"tags":true},"before_sensitive":false,"after_sensitive":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":[],"encryption":[],"subnet":[],"tags":{}}}},{"address":"module.hub.random_string.naming","module_address":"module.hub","mode":"managed","type":"random_string","name":"naming","provider_name":"registry.terraform.io/hashicorp/random","change":{"actions":["create"],"before":null,"after":{"keepers":null,"length":6,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"numeric":true,"override_special":null,"special":false,"upper":false},"after_unknown":{"id":true,"result":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.spoke.azurerm_databricks_workspace.this","module_address":"module.spoke","mode":"managed","type":"azurerm_databricks_workspace","name":"this","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"access_connector_id":null,"custom_parameters":[{"machine_learning_workspace_id":null,"no_public_ip":true}],"customer_managed_key_enabled":true,"default_storage_firewall_enabled":null,"enhanced_security_compliance":[],"infrastructure_encryption_enabled":false,"load_balancer_backend_address_pool_id":null,"location":"uksouth","managed_disk_cmk_key_vault_id":null,"managed_disk_cmk_key_vault_key_id":null,"managed_disk_cmk_rotation_to_latest_version_enabled":null,"managed_services_cmk_key_vault_id":null,"managed_services_cmk_key_vault_key_id":null,"network_security_group_rules_required":"NoAzureDatabricksRules","public_network_access_enabled":false,"sku":"premium","timeouts":null},"after_unknown":{"custom_parameters":[{"nat_gateway_name":true,"private_subnet_name":true,"private_subnet_network_security_group_association_id":true,"public_ip_name":true,"public_subnet_name":true,"public_subnet_network_security_group_association_id":true,"storage_account_name":true,"storage_account_sku_name":true,"virtual_network_id":true,"vnet_address_prefix":true}],"disk_encryption_set_id":true,"enhanced_security_compliance":[],"id":true,"managed_disk_identity":true,"managed_resource_group_id":true,"managed_resource_group_name":true,"name":true,"resource_group_name":true,"storage_account_identity":true,"tags":true,"workspace_id":true,"workspace_url":true},"before_sensitive":false,"after_sensitive":{"custom_parameters":[{}],"enhanced_security_compliance":[],"managed_disk_identity":[],"storage_account_identity":[],"tags":{}}}},{"address":"module.spoke.azurerm_firewall_application_rule_collection.adbfqdn","module_address":"module.spoke","mode":"managed","type":"azurerm_firewall_application_rule_collection","name":"adbfqdn","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"action":"Allow","azure_firewall_name":"hubfirewall","name":"adbcontrolplanefqdn","priority":200,"rule":[{"description":null,"fqdn_tags":null,"name":"databricks-control-plane-services","protocol":[{"port":443,"type":"Https"}],"source_addresses":["10.179.0.0/23","10.179.2.0/23"],"source_ip_groups":null}],"timeouts":null},"after_unknown":{"id":true,"resource_group_name":true,"rule":[{"protocol":[{}],"source_addresses":[false,false],"target_fqdns":true}]},"before_sensitive":false,"after_sensitive":{"rule":[{"protocol":[{}],"source_addresses":[false,false],"target_fqdns":[]}]}}},{"address":"module.spoke.azurerm_firewall_network_rule_collection.adbfnetwork","module_address":"module.spoke","mode":"managed","type":"azurerm_firewall_network_rule_collection","name":"adbfnetwork","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"action":"Allow","azure_firewall_name":"hubfirewall","name":"adbcontrolplanenetwork","priority":200,"rule":[{"description":null,"destination_addresses":[""],"destination_fqdns":null,"destination_ip_groups":null,"destination_ports":["3306"],"name":"databricks-metastore","protocols":["TCP"],"source_addresses":["10.179.0.0/23","10.179.2.0/23"],"source_ip_groups":null}],"timeouts":null},"after_unknown":{"id":true,"resource_group_name":true,"rule":[{"destination_addresses":[false],"destination_ports":[false],"protocols":[false],"source_addresses":[false,false]}]},"before_sensitive":false,"after_sensitive":{"rule":[{"destination_addresses":[false],"destination_ports":[false],"protocols":[false],"source_addresses":[false,false]}]}}},{"address":"module.spoke.azurerm_network_interface.testvmnic","module_address":"module.spoke","mode":"managed","type":"azurerm_network_interface","name":"testvmnic","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"accelerated_networking_enabled":false,"auxiliary_mode":null,"auxiliary_sku":null,"dns_servers":null,"edge_zone":null,"internal_dns_name_label":null,"ip_configuration":[{"name":"testvmip","private_ip_address_allocation":"Dynamic","private_ip_address_version":"IPv4"}],"ip_forwarding_enabled":false,"location":"uksouth","tags":null,"timeouts":null},"after_unknown":{"applied_dns_servers":true,"id":true,"internal_domain_name_suffix":true,"ip_configuration":[{"gateway_load_balancer_frontend_ip_configuration_id":true,"primary":true,"private_ip_address":true,"public_ip_address_id":true,"subnet_id":true}],"mac_address":true,"name":true,"private_ip_address":true,"private_ip_addresses":true,"resource_group_name":true,"virtual_machine_id":true},"before_sensitive":false,"after_sensitive":{"applied_dns_servers":[],"ip_configuration":[{}],"private_ip_addresses":[]}}},{"address":"module.spoke.azurerm_network_interface_security_group_association.testvmnsgassoc","module_address":"module.spoke","mode":"managed","type":"azurerm_network_interface_security_group_association","name":"testvmnsgassoc","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"timeouts":null},"after_unknown":{"id":true,"network_interface_id":true,"network_security_group_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.spoke.azurerm_network_security_group.testvm-nsg","module_address":"module.spoke","mode":"managed","type":"azurerm_network_security_group","name":"testvm-nsg","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"uksouth","timeouts":null},"after_unknown":{"id":true,"name":true,"resource_group_name":true,"security_rule":true,"tags":true},"before_sensitive":false,"after_sensitive":{"security_rule":[],"tags":{}}}},{"address":"module.spoke.azurerm_network_security_group.this","module_address":"module.spoke","mode":"managed","type":"azurerm_network_security_group","name":"this","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"uksouth","timeouts":null},"after_unknown":{"id":true,"name":true,"resource_group_name":true,"security_rule":true,"tags":true},"before_sensitive":false,"after_sensitive":{"security_rule":[],"tags":{}}}},{"address":"module.spoke.azurerm_network_security_rule.aad","module_address":"module.spoke","mode":"managed","type":"azurerm_network_security_rule","name":"aad","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"access":"Allow","description":null,"destination_address_prefix":"AzureActiveDirectory","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":"443","destination_port_ranges":null,"direction":"Outbound","name":"AllowAAD","priority":200,"protocol":"Tcp","source_address_prefix":"VirtualNetwork","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"after_unknown":{"id":true,"network_security_group_name":true,"resource_group_name":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.spoke.azurerm_network_security_rule.azfrontdoor","module_address":"module.spoke","mode":"managed","type":"azurerm_network_security_rule","name":"azfrontdoor","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"access":"Allow","description":null,"destination_address_prefix":"AzureFrontDoor.Frontend","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":"443","destination_port_ranges":null,"direction":"Outbound","name":"AllowAzureFrontDoor","priority":201,"protocol":"Tcp","source_address_prefix":"VirtualNetwork","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"after_unknown":{"id":true,"network_security_group_name":true,"resource_group_name":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.spoke.azurerm_network_security_rule.test0","module_address":"module.spoke","mode":"managed","type":"azurerm_network_security_rule","name":"test0","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"access":"Allow","description":null,"destination_address_prefix":"VirtualNetwork","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":"3389","destination_port_ranges":null,"direction":"Inbound","name":"RDP","priority":200,"protocol":"Tcp","source_address_prefix":null,"source_address_prefixes":["94.205.157.11"],"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"after_unknown":{"id":true,"network_security_group_name":true,"resource_group_name":true,"source_address_prefixes":[false]},"before_sensitive":false,"after_sensitive":{"source_address_prefixes":[false]}}},{"address":"module.spoke.azurerm_private_dns_zone.dnsdbfs_blob","module_address":"module.spoke","mode":"managed","type":"azurerm_private_dns_zone","name":"dnsdbfs_blob","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"name":"privatelink.blob.core.windows.net","tags":null,"timeouts":null},"after_unknown":{"id":true,"max_number_of_record_sets":true,"max_number_of_virtual_network_links":true,"max_number_of_virtual_network_links_with_registration":true,"number_of_record_sets":true,"resource_group_name":true,"soa_record":true},"before_sensitive":false,"after_sensitive":{"soa_record":[]}}},{"address":"module.spoke.azurerm_private_dns_zone.dnsdbfs_dfs","module_address":"module.spoke","mode":"managed","type":"azurerm_private_dns_zone","name":"dnsdbfs_dfs","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"name":"privatelink.dfs.core.windows.net","tags":null,"timeouts":null},"after_unknown":{"id":true,"max_number_of_record_sets":true,"max_number_of_virtual_network_links":true,"max_number_of_virtual_network_links_with_registration":true,"number_of_record_sets":true,"resource_group_name":true,"soa_record":true},"before_sensitive":false,"after_sensitive":{"soa_record":[]}}},{"address":"module.spoke.azurerm_private_dns_zone.dnsdpcp","module_address":"module.spoke","mode":"managed","type":"azurerm_private_dns_zone","name":"dnsdpcp","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"name":"privatelink.azuredatabricks.net","tags":null,"timeouts":null},"after_unknown":{"id":true,"max_number_of_record_sets":true,"max_number_of_virtual_network_links":true,"max_number_of_virtual_network_links_with_registration":true,"number_of_record_sets":true,"resource_group_name":true,"soa_record":true},"before_sensitive":false,"after_sensitive":{"soa_record":[]}}},{"address":"module.spoke.azurerm_private_dns_zone_virtual_network_link.dbfsdnszonevnetlink_blob","module_address":"module.spoke","mode":"managed","type":"azurerm_private_dns_zone_virtual_network_link","name":"dbfsdnszonevnetlink_blob","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"name":"dbfsspokevnetconnection-blob","private_dns_zone_name":"privatelink.blob.core.windows.net","registration_enabled":false,"tags":null,"timeouts":null},"after_unknown":{"id":true,"resource_group_name":true,"virtual_network_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.spoke.azurerm_private_dns_zone_virtual_network_link.dbfsdnszonevnetlink_dfs","module_address":"module.spoke","mode":"managed","type":"azurerm_private_dns_zone_virtual_network_link","name":"dbfsdnszonevnetlink_dfs","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"name":"dbfsspokevnetconnection-dfs","private_dns_zone_name":"privatelink.dfs.core.windows.net","registration_enabled":false,"tags":null,"timeouts":null},"after_unknown":{"id":true,"resource_group_name":true,"virtual_network_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.spoke.azurerm_private_dns_zone_virtual_network_link.dpcpdnszonevnetlink","module_address":"module.spoke","mode":"managed","type":"azurerm_private_dns_zone_virtual_network_link","name":"dpcpdnszonevnetlink","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"name":"dpcpspokevnetconnection","private_dns_zone_name":"privatelink.azuredatabricks.net","registration_enabled":false,"tags":null,"timeouts":null},"after_unknown":{"id":true,"resource_group_name":true,"virtual_network_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.spoke.azurerm_private_endpoint.auth","module_address":"module.spoke","mode":"managed","type":"azurerm_private_endpoint","name":"auth","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"custom_network_interface_name":null,"ip_configuration":[],"location":"uksouth","name":"aadauthpvtendpoint","private_dns_zone_group":[{"name":"private-dns-zone-auth"}],"private_service_connection":[{"is_manual_connection":false,"name":"ple-digital-auth","private_connection_resource_alias":null,"request_message":null,"subresource_names":["browser_authentication"]}],"tags":null,"timeouts":null},"after_unknown":{"custom_dns_configs":true,"id":true,"ip_configuration":[],"network_interface":true,"private_dns_zone_configs":true,"private_dns_zone_group":[{"id":true,"private_dns_zone_ids":true}],"private_service_connection":[{"private_connection_resource_id":true,"private_ip_address":true,"subresource_names":[false]}],"resource_group_name":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{"custom_dns_configs":[],"ip_configuration":[],"network_interface":[],"private_dns_zone_configs":[],"private_dns_zone_group":[{"private_dns_zone_ids":[]}],"private_service_connection":[{"subresource_names":[false]}]}}},{"address":"module.spoke.azurerm_private_endpoint.dbfspe_blob","module_address":"module.spoke","mode":"managed","type":"azurerm_private_endpoint","name":"dbfspe_blob","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"custom_network_interface_name":null,"ip_configuration":[],"location":"uksouth","name":"dbfspvtendpoint-blob","private_dns_zone_group":[{"name":"private-dns-zone-dbfs"}],"private_service_connection":[{"is_manual_connection":false,"name":"ple-digital-dbfs-blob","private_connection_resource_alias":null,"request_message":null,"subresource_names":["blob"]}],"tags":null,"timeouts":null},"after_unknown":{"custom_dns_configs":true,"id":true,"ip_configuration":[],"network_interface":true,"private_dns_zone_configs":true,"private_dns_zone_group":[{"id":true,"private_dns_zone_ids":true}],"private_service_connection":[{"private_connection_resource_id":true,"private_ip_address":true,"subresource_names":[false]}],"resource_group_name":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{"custom_dns_configs":[],"ip_configuration":[],"network_interface":[],"private_dns_zone_configs":[],"private_dns_zone_group":[{"private_dns_zone_ids":[]}],"private_service_connection":[{"subresource_names":[false]}]}}},{"address":"module.spoke.azurerm_private_endpoint.dbfspe_dfs","module_address":"module.spoke","mode":"managed","type":"azurerm_private_endpoint","name":"dbfspe_dfs","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"custom_network_interface_name":null,"ip_configuration":[],"location":"uksouth","name":"dbfspvtendpoint-dfs","private_dns_zone_group":[{"name":"private-dns-zone-dbfs"}],"private_service_connection":[{"is_manual_connection":false,"name":"ple-digital-dbfs-dfs","private_connection_resource_alias":null,"request_message":null,"subresource_names":["dfs"]}],"tags":null,"timeouts":null},"after_unknown":{"custom_dns_configs":true,"id":true,"ip_configuration":[],"network_interface":true,"private_dns_zone_configs":true,"private_dns_zone_group":[{"id":true,"private_dns_zone_ids":true}],"private_service_connection":[{"private_connection_resource_id":true,"private_ip_address":true,"subresource_names":[false]}],"resource_group_name":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{"custom_dns_configs":[],"ip_configuration":[],"network_interface":[],"private_dns_zone_configs":[],"private_dns_zone_group":[{"private_dns_zone_ids":[]}],"private_service_connection":[{"subresource_names":[false]}]}}},{"address":"module.spoke.azurerm_private_endpoint.dpcp","module_address":"module.spoke","mode":"managed","type":"azurerm_private_endpoint","name":"dpcp","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"custom_network_interface_name":null,"ip_configuration":[],"location":"uksouth","name":"dpcppvtendpoint","private_dns_zone_group":[{"name":"private-dns-zone-dpcp"}],"private_service_connection":[{"is_manual_connection":false,"name":"ple-digital-dpcp","private_connection_resource_alias":null,"request_message":null,"subresource_names":["databricks_ui_api"]}],"tags":null,"timeouts":null},"after_unknown":{"custom_dns_configs":true,"id":true,"ip_configuration":[],"network_interface":true,"private_dns_zone_configs":true,"private_dns_zone_group":[{"id":true,"private_dns_zone_ids":true}],"private_service_connection":[{"private_connection_resource_id":true,"private_ip_address":true,"subresource_names":[false]}],"resource_group_name":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{"custom_dns_configs":[],"ip_configuration":[],"network_interface":[],"private_dns_zone_configs":[],"private_dns_zone_group":[{"private_dns_zone_ids":[]}],"private_service_connection":[{"subresource_names":[false]}]}}},{"address":"module.spoke.azurerm_public_ip.testvmpublicip","module_address":"module.spoke","mode":"managed","type":"azurerm_public_ip","name":"testvmpublicip","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"allocation_method":"Static","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":null,"domain_name_label_scope":null,"edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"uksouth","public_ip_prefix_id":null,"reverse_fqdn":null,"sku":"Standard","sku_tier":"Regional","tags":null,"timeouts":null,"zones":null},"after_unknown":{"fqdn":true,"id":true,"ip_address":true,"name":true,"resource_group_name":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.spoke.azurerm_resource_group.this","module_address":"module.spoke","mode":"managed","type":"azurerm_resource_group","name":"this","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"uksouth","managed_by":null,"timeouts":null},"after_unknown":{"id":true,"name":true,"tags":true},"before_sensitive":false,"after_sensitive":{"tags":{}}}},{"address":"module.spoke.azurerm_route_table.adbroute","module_address":"module.spoke","mode":"managed","type":"azurerm_route_table","name":"adbroute","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"bgp_route_propagation_enabled":true,"location":"uksouth","name":"spoke-routetable","route":[{"address_prefix":"0.0.0.0/0","name":"to-firewall","next_hop_type":"VirtualAppliance"}],"tags":null,"timeouts":null},"after_unknown":{"id":true,"resource_group_name":true,"route":[{"next_hop_in_ip_address":true}],"subnets":true},"before_sensitive":false,"after_sensitive":{"route":[{}],"subnets":[]}}},{"address":"module.spoke.azurerm_subnet.plsubnet","module_address":"module.spoke","mode":"managed","type":"azurerm_subnet","name":"plsubnet","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_prefixes":["10.179.4.0/23"],"default_outbound_access_enabled":true,"delegation":[],"private_endpoint_network_policies":"Enabled","private_link_service_network_policies_enabled":true,"service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null},"after_unknown":{"address_prefixes":[false],"delegation":[],"id":true,"name":true,"resource_group_name":true,"virtual_network_name":true},"before_sensitive":false,"after_sensitive":{"address_prefixes":[false],"delegation":[]}}},{"address":"module.spoke.azurerm_subnet.private","module_address":"module.spoke","mode":"managed","type":"azurerm_subnet","name":"private","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_prefixes":["10.179.2.0/23"],"default_outbound_access_enabled":true,"delegation":[{"name":"databricks","service_delegation":[{"actions":["Microsoft.Network/virtualNetworks/subnets/join/action","Microsoft.Network/virtualNetworks/subnets/prepareNetworkPolicies/action","Microsoft.Network/virtualNetworks/subnets/unprepareNetworkPolicies/action"],"name":"Microsoft.Databricks/workspaces"}]}],"private_endpoint_network_policies":"Enabled","private_link_service_network_policies_enabled":true,"service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null},"after_unknown":{"address_prefixes":[false],"delegation":[{"service_delegation":[{"actions":[false,false,false]}]}],"id":true,"name":true,"resource_group_name":true,"virtual_network_name":true},"before_sensitive":false,"after_sensitive":{"address_prefixes":[false],"delegation":[{"service_delegation":[{"actions":[false,false,false]}]}]}}},{"address":"module.spoke.azurerm_subnet.public","module_address":"module.spoke","mode":"managed","type":"azurerm_subnet","name":"public","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_prefixes":["10.179.0.0/23"],"default_outbound_access_enabled":true,"delegation":[{"name":"databricks","service_delegation":[{"actions":["Microsoft.Network/virtualNetworks/subnets/join/action","Microsoft.Network/virtualNetworks/subnets/prepareNetworkPolicies/action","Microsoft.Network/virtualNetworks/subnets/unprepareNetworkPolicies/action"],"name":"Microsoft.Databricks/workspaces"}]}],"private_endpoint_network_policies":"Disabled","private_link_service_network_policies_enabled":true,"service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null},"after_unknown":{"address_prefixes":[false],"delegation":[{"service_delegation":[{"actions":[false,false,false]}]}],"id":true,"name":true,"resource_group_name":true,"virtual_network_name":true},"before_sensitive":false,"after_sensitive":{"address_prefixes":[false],"delegation":[{"service_delegation":[{"actions":[false,false,false]}]}]}}},{"address":"module.spoke.azurerm_subnet.testvmsubnet","module_address":"module.spoke","mode":"managed","type":"azurerm_subnet","name":"testvmsubnet","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_prefixes":["10.179.6.0/23"],"default_outbound_access_enabled":true,"delegation":[],"private_endpoint_network_policies":"Disabled","private_link_service_network_policies_enabled":true,"service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null},"after_unknown":{"address_prefixes":[false],"delegation":[],"id":true,"name":true,"resource_group_name":true,"virtual_network_name":true},"before_sensitive":false,"after_sensitive":{"address_prefixes":[false],"delegation":[]}}},{"address":"module.spoke.azurerm_subnet_network_security_group_association.private","module_address":"module.spoke","mode":"managed","type":"azurerm_subnet_network_security_group_association","name":"private","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"timeouts":null},"after_unknown":{"id":true,"network_security_group_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.spoke.azurerm_subnet_network_security_group_association.public","module_address":"module.spoke","mode":"managed","type":"azurerm_subnet_network_security_group_association","name":"public","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"timeouts":null},"after_unknown":{"id":true,"network_security_group_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.spoke.azurerm_subnet_route_table_association.privateudr","module_address":"module.spoke","mode":"managed","type":"azurerm_subnet_route_table_association","name":"privateudr","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.spoke.azurerm_subnet_route_table_association.publicudr","module_address":"module.spoke","mode":"managed","type":"azurerm_subnet_route_table_association","name":"publicudr","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.spoke.azurerm_virtual_network.this","module_address":"module.spoke","mode":"managed","type":"azurerm_virtual_network","name":"this","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_space":["10.179.0.0/20"],"bgp_community":null,"ddos_protection_plan":[],"edge_zone":null,"encryption":[],"flow_timeout_in_minutes":null,"location":"uksouth","private_endpoint_vnet_policies":"Disabled","timeouts":null},"after_unknown":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":true,"encryption":[],"guid":true,"id":true,"name":true,"resource_group_name":true,"subnet":true,"tags":true},"before_sensitive":false,"after_sensitive":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":[],"encryption":[],"subnet":[],"tags":{}}}},{"address":"module.spoke.azurerm_virtual_network_peering.hubvnet","module_address":"module.spoke","mode":"managed","type":"azurerm_virtual_network_peering","name":"hubvnet","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"allow_forwarded_traffic":false,"allow_gateway_transit":false,"allow_virtual_network_access":true,"local_subnet_names":null,"name":"peerhubtospoke","only_ipv6_peering_enabled":null,"peer_complete_virtual_networks_enabled":true,"remote_subnet_names":null,"timeouts":null,"triggers":null,"use_remote_gateways":false},"after_unknown":{"id":true,"remote_virtual_network_id":true,"resource_group_name":true,"virtual_network_name":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.spoke.azurerm_virtual_network_peering.spokevnet","module_address":"module.spoke","mode":"managed","type":"azurerm_virtual_network_peering","name":"spokevnet","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"allow_forwarded_traffic":false,"allow_gateway_transit":false,"allow_virtual_network_access":true,"local_subnet_names":null,"name":"peerspoketohub","only_ipv6_peering_enabled":null,"peer_complete_virtual_networks_enabled":true,"remote_subnet_names":null,"timeouts":null,"triggers":null,"use_remote_gateways":false},"after_unknown":{"id":true,"remote_virtual_network_id":true,"resource_group_name":true,"virtual_network_name":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.spoke.azurerm_windows_virtual_machine.testvm","module_address":"module.spoke","mode":"managed","type":"azurerm_windows_virtual_machine","name":"testvm","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"additional_capabilities":[],"additional_unattend_content":[],"admin_password":"TesTed567!!!","admin_username":"azureuser","allow_extension_operations":true,"availability_set_id":null,"boot_diagnostics":[],"bypass_platform_safety_checks_on_user_schedule_enabled":false,"capacity_reservation_group_id":null,"custom_data":null,"dedicated_host_group_id":null,"dedicated_host_id":null,"edge_zone":null,"enable_automatic_updates":true,"encryption_at_host_enabled":null,"eviction_policy":null,"extensions_time_budget":"PT1H30M","gallery_application":[],"hotpatching_enabled":false,"identity":[],"license_type":null,"location":"uksouth","max_bid_price":-1,"os_disk":[{"caching":"ReadWrite","diff_disk_settings":[],"disk_encryption_set_id":null,"secure_vm_disk_encryption_set_id":null,"security_encryption_type":null,"storage_account_type":"Standard_LRS","write_accelerator_enabled":false}],"os_image_notification":[],"patch_assessment_mode":"ImageDefault","patch_mode":"AutomaticByOS","plan":[],"platform_fault_domain":-1,"priority":"Regular","provision_vm_agent":true,"proximity_placement_group_id":null,"reboot_setting":null,"secret":[],"secure_boot_enabled":null,"size":"Standard_F4s_v2","source_image_id":null,"source_image_reference":[{"offer":"windows-10","publisher":"MicrosoftWindowsDesktop","sku":"19h2-pro-g2","version":"latest"}],"tags":null,"timeouts":null,"timezone":null,"user_data":null,"virtual_machine_scale_set_id":null,"vm_agent_platform_updates_enabled":false,"vtpm_enabled":null,"winrm_listener":[],"zone":null},"after_unknown":{"additional_capabilities":[],"additional_unattend_content":[],"boot_diagnostics":[],"computer_name":true,"disk_controller_type":true,"gallery_application":[],"id":true,"identity":[],"name":true,"network_interface_ids":true,"os_disk":[{"diff_disk_settings":[],"disk_size_gb":true,"id":true,"name":true}],"os_image_notification":[],"plan":[],"private_ip_address":true,"private_ip_addresses":true,"public_ip_address":true,"public_ip_addresses":true,"resource_group_name":true,"secret":[],"source_image_reference":[{}],"termination_notification":true,"virtual_machine_id":true,"winrm_listener":[]},"before_sensitive":false,"after_sensitive":{"additional_capabilities":[],"additional_unattend_content":[],"admin_password":true,"boot_diagnostics":[],"custom_data":true,"gallery_application":[],"identity":[],"network_interface_ids":[],"os_disk":[{"diff_disk_settings":[]}],"os_image_notification":[],"plan":[],"private_ip_addresses":[],"public_ip_addresses":[],"secret":[],"source_image_reference":[{}],"termination_notification":[],"winrm_listener":[]}}},{"address":"module.spoke.random_string.naming","module_address":"module.spoke","mode":"managed","type":"random_string","name":"naming","provider_name":"registry.terraform.io/hashicorp/random","change":{"actions":["create"],"before":null,"after":{"keepers":null,"length":6,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"numeric":true,"override_special":null,"special":false,"upper":false},"after_unknown":{"id":true,"result":true},"before_sensitive":false,"after_sensitive":{}}}],"prior_state":{"format_version":"1.0","terraform_version":"1.9.5","values":{"root_module":{"child_modules":[{"resources":[{"address":"module.hub.data.azurerm_client_config.current","mode":"data","type":"azurerm_client_config","name":"current","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"client_id":"04b07795-8ddb-461a-bbee-02f9e1bf7b46","id":"Y2xpZW50Q29uZmlncy9jbGllbnRJZD0wNGIwNzc5NS04ZGRiLTQ2MWEtYmJlZS0wMmY5ZTFiZjdiNDY7b2JqZWN0SWQ9YzM1NGM2MGQtNDFkNy00YmZmLWFlYTAtNWVmODQ2Zjc1N2IwO3N1YnNjcmlwdGlvbklkPWYzZWE5MTY2LWZiNTEtNGE1ZS1iMmFjLWVhODExOGVmNDNiYTt0ZW5hbnRJZD1kNWI0NTI5Yi03NDU3LTQ5ZDktOTMxYi03YzdmOWI5ZWVkNTQ=","object_id":"c354c60d-41d7-4bff-aea0-5ef846f757b0","subscription_id":"f3ea9166-fb51-4a5e-b2ac-ea8118ef43ba","tenant_id":"d5b4529b-7457-49d9-931b-7c7f9b9eed54","timeouts":null},"sensitive_values":{}},{"address":"module.hub.data.external.me","mode":"data","type":"external","name":"me","provider_name":"registry.terraform.io/hashicorp/external","schema_version":0,"values":{"id":"-","program":["az","account","show","--query","user"],"query":null,"result":{"name":"saqib.tamli@clearpeaks.com","type":"user"},"working_dir":null},"sensitive_values":{"program":[false,false,false,false,false],"result":{}}}],"address":"module.hub"},{"resources":[{"address":"module.spoke.data.azurerm_client_config.current","mode":"data","type":"azurerm_client_config","name":"current","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"client_id":"04b07795-8ddb-461a-bbee-02f9e1bf7b46","id":"Y2xpZW50Q29uZmlncy9jbGllbnRJZD0wNGIwNzc5NS04ZGRiLTQ2MWEtYmJlZS0wMmY5ZTFiZjdiNDY7b2JqZWN0SWQ9YzM1NGM2MGQtNDFkNy00YmZmLWFlYTAtNWVmODQ2Zjc1N2IwO3N1YnNjcmlwdGlvbklkPWYzZWE5MTY2LWZiNTEtNGE1ZS1iMmFjLWVhODExOGVmNDNiYTt0ZW5hbnRJZD1kNWI0NTI5Yi03NDU3LTQ5ZDktOTMxYi03YzdmOWI5ZWVkNTQ=","object_id":"c354c60d-41d7-4bff-aea0-5ef846f757b0","subscription_id":"f3ea9166-fb51-4a5e-b2ac-ea8118ef43ba","tenant_id":"d5b4529b-7457-49d9-931b-7c7f9b9eed54","timeouts":null},"sensitive_values":{}},{"address":"module.spoke.data.external.me","mode":"data","type":"external","name":"me","provider_name":"registry.terraform.io/hashicorp/external","schema_version":0,"values":{"id":"-","program":["az","account","show","--query","user"],"query":null,"result":{"name":"saqib.tamli@clearpeaks.com","type":"user"},"working_dir":null},"sensitive_values":{"program":[false,false,false,false,false],"result":{}}},{"address":"module.spoke.data.http.my_public_ip","mode":"data","type":"http","name":"my_public_ip","provider_name":"registry.terraform.io/hashicorp/http","schema_version":0,"values":{"body":"{\n  \"ip\": \"94.205.157.11\",\n  \"ip_decimal\": 1590533387,\n  \"country\": \"United Arab Emirates\",\n  \"country_iso\": \"AE\",\n  \"country_eu\": false,\n  \"region_name\": \"Abu Dhabi\",\n  \"region_code\": \"AZ\",\n  \"city\": \"Abu Dhabi\",\n  \"latitude\": 24.4542,\n  \"longitude\": 54.406,\n  \"time_zone\": \"Asia/Dubai\",\n  \"asn\": \"AS15802\",\n  \"asn_org\": \"Emirates Integrated Telecommunications Company PJSC\",\n  \"user_agent\": {\n    \"product\": \"Go-http-client\",\n    \"version\": \"2.0\",\n    \"raw_value\": \"Go-http-client/2.0\"\n  }\n}","ca_cert_pem":null,"id":"https://ifconfig.co/json","insecure":null,"method":null,"request_body":null,"request_headers":{"Accept":"application/json"},"request_timeout_ms":null,"response_body":"{\n  \"ip\": \"94.205.157.11\",\n  \"ip_decimal\": 1590533387,\n  \"country\": \"United Arab Emirates\",\n  \"country_iso\": \"AE\",\n  \"country_eu\": false,\n  \"region_name\": \"Abu Dhabi\",\n  \"region_code\": \"AZ\",\n  \"city\": \"Abu Dhabi\",\n  \"latitude\": 24.4542,\n  \"longitude\": 54.406,\n  \"time_zone\": \"Asia/Dubai\",\n  \"asn\": \"AS15802\",\n  \"asn_org\": \"Emirates Integrated Telecommunications Company PJSC\",\n  \"user_agent\": {\n    \"product\": \"Go-http-client\",\n    \"version\": \"2.0\",\n    \"raw_value\": \"Go-http-client/2.0\"\n  }\n}","response_body_base64":"ewogICJpcCI6ICI5NC4yMDUuMTU3LjExIiwKICAiaXBfZGVjaW1hbCI6IDE1OTA1MzMzODcsCiAgImNvdW50cnkiOiAiVW5pdGVkIEFyYWIgRW1pcmF0ZXMiLAogICJjb3VudHJ5X2lzbyI6ICJBRSIsCiAgImNvdW50cnlfZXUiOiBmYWxzZSwKICAicmVnaW9uX25hbWUiOiAiQWJ1IERoYWJpIiwKICAicmVnaW9uX2NvZGUiOiAiQVoiLAogICJjaXR5IjogIkFidSBEaGFiaSIsCiAgImxhdGl0dWRlIjogMjQuNDU0MiwKICAibG9uZ2l0dWRlIjogNTQuNDA2LAogICJ0aW1lX3pvbmUiOiAiQXNpYS9EdWJhaSIsCiAgImFzbiI6ICJBUzE1ODAyIiwKICAiYXNuX29yZyI6ICJFbWlyYXRlcyBJbnRlZ3JhdGVkIFRlbGVjb21tdW5pY2F0aW9ucyBDb21wYW55IFBKU0MiLAogICJ1c2VyX2FnZW50IjogewogICAgInByb2R1Y3QiOiAiR28taHR0cC1jbGllbnQiLAogICAgInZlcnNpb24iOiAiMi4wIiwKICAgICJyYXdfdmFsdWUiOiAiR28taHR0cC1jbGllbnQvMi4wIgogIH0KfQ==","response_headers":{"Alt-Svc":"h3=\":443\"; ma=86400","Cf-Cache-Status":"DYNAMIC","Cf-Ray":"9013f16d5c25e1ed-MRS","Content-Type":"application/json","Date":"Mon, 13 Jan 2025 08:16:14 GMT","Nel":"{\"success_fraction\":0,\"report_to\":\"cf-nel\",\"max_age\":604800}","Report-To":"{\"endpoints\":[{\"url\":\"https:\\/\\/a.nel.cloudflare.com\\/report\\/v4?s=jK6B8NFhcsj7BrBLjxG9KHf4r7fOrjDGuCcP50%2FFNzDvzjR%2B9OqFlMzmPPfFCoCincDRCrKLl%2FBeJrKO%2BQCPGgvDmAa7Lel8L8pTnSDU10uDD%2FpphLkfI2rIl0VmOg%3D%3D\"}],\"group\":\"cf-nel\",\"max_age\":604800}","Server":"cloudflare","Server-Timing":"cfL4;desc=\"?proto=TCP\u0026rtt=371637\u0026min_rtt=287018\u0026rtt_var=168074\u0026sent=6\u0026recv=7\u0026lost=0\u0026retrans=0\u0026sent_bytes=3199\u0026recv_bytes=503\u0026delivery_rate=14424\u0026cwnd=252\u0026unsent_bytes=0\u0026cid=f47d3558bbbca7e0\u0026ts=385\u0026x=0\""},"retry":null,"status_code":200,"url":"https://ifconfig.co/json"},"sensitive_values":{"request_headers":{},"response_headers":{}}}],"address":"module.spoke"}]}}},"configuration":{"provider_config":{"azurerm":{"name":"azurerm","full_name":"registry.terraform.io/hashicorp/azurerm","expressions":{"features":[{}],"subscription_id":{"references":["var.subscription_id"]}}},"module.hub:external":{"name":"external","full_name":"registry.terraform.io/hashicorp/external","module_address":"module.hub"},"module.hub:random":{"name":"random","full_name":"registry.terraform.io/hashicorp/random","module_address":"module.hub"},"module.spoke:external":{"name":"external","full_name":"registry.terraform.io/hashicorp/external","module_address":"module.spoke"},"module.spoke:http":{"name":"http","full_name":"registry.terraform.io/hashicorp/http","module_address":"module.spoke"},"module.spoke:random":{"name":"random","full_name":"registry.terraform.io/hashicorp/random","module_address":"module.spoke"}},"root_module":{"module_calls":{"hub":{"source":"./modules/hub","expressions":{"hubcidr":{"references":["var.hubcidr"]},"rglocation":{"references":["var.rglocation"]},"tags":{"references":["var.tags"]},"workspace_prefix":{"references":["var.workspace_prefix"]}},"module":{"outputs":{"hubfirewall":{"expression":{"references":["azurerm_firewall.hubfw"]}},"hubvnet":{"expression":{"references":["azurerm_virtual_network.hubvnet"]}},"next_hop_in_ip_addresses":{"expression":{"references":["azurerm_firewall.hubfw.ip_configuration[0].private_ip_address","azurerm_firewall.hubfw.ip_configuration[0]","azurerm_firewall.hubfw.ip_configuration","azurerm_firewall.hubfw"]}}},"resources":[{"address":"azurerm_firewall.hubfw","mode":"managed","type":"azurerm_firewall","name":"hubfw","provider_config_key":"azurerm","expressions":{"ip_configuration":[{"name":{"constant_value":"configuration"},"public_ip_address_id":{"references":["azurerm_public_ip.fwpublicip.id","azurerm_public_ip.fwpublicip"]},"subnet_id":{"references":["azurerm_subnet.hubfw.id","azurerm_subnet.hubfw"]}}],"location":{"references":["azurerm_resource_group.this.location","azurerm_resource_group.this"]},"name":{"constant_value":"hubfirewall"},"resource_group_name":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]},"sku_name":{"constant_value":"AZFW_VNet"},"sku_tier":{"constant_value":"Standard"}},"schema_version":0},{"address":"azurerm_public_ip.fwpublicip","mode":"managed","type":"azurerm_public_ip","name":"fwpublicip","provider_config_key":"azurerm","expressions":{"allocation_method":{"constant_value":"Static"},"location":{"references":["azurerm_resource_group.this.location","azurerm_resource_group.this"]},"name":{"constant_value":"hubfirewallpublicip"},"resource_group_name":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]},"sku":{"constant_value":"Standard"}},"schema_version":0},{"address":"azurerm_resource_group.this","mode":"managed","type":"azurerm_resource_group","name":"this","provider_config_key":"azurerm","expressions":{"location":{"references":["local.location"]},"name":{"references":["local.prefix"]},"tags":{"references":["local.tags"]}},"schema_version":0},{"address":"azurerm_subnet.hubfw","mode":"managed","type":"azurerm_subnet","name":"hubfw","provider_config_key":"azurerm","expressions":{"address_prefixes":{"references":["var.hubcidr"]},"name":{"constant_value":"AzureFirewallSubnet"},"resource_group_name":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]},"virtual_network_name":{"references":["azurerm_virtual_network.hubvnet.name","azurerm_virtual_network.hubvnet"]}},"schema_version":0},{"address":"azurerm_virtual_network.hubvnet","mode":"managed","type":"azurerm_virtual_network","name":"hubvnet","provider_config_key":"azurerm","expressions":{"address_space":{"references":["var.hubcidr"]},"location":{"references":["azurerm_resource_group.this.location","azurerm_resource_group.this"]},"name":{"references":["local.prefix"]},"resource_group_name":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]},"tags":{"references":["local.tags"]}},"schema_version":0},{"address":"random_string.naming","mode":"managed","type":"random_string","name":"naming","provider_config_key":"module.hub:random","expressions":{"length":{"constant_value":6},"special":{"constant_value":false},"upper":{"constant_value":false}},"schema_version":2},{"address":"data.azurerm_client_config.current","mode":"data","type":"azurerm_client_config","name":"current","provider_config_key":"azurerm","schema_version":0},{"address":"data.external.me","mode":"data","type":"external","name":"me","provider_config_key":"module.hub:external","expressions":{"program":{"constant_value":["az","account","show","--query","user"]}},"schema_version":0}],"variables":{"hubcidr":{"default":"10.178.0.0/20","description":"CIDR for Hub VNet"},"rglocation":{"description":"Location for the resource group"},"tags":{"description":"Tags to apply to resources"},"workspace_prefix":{"description":"Prefix for the workspace resources"}}}},"spoke":{"source":"./modules/spoke-workspace","expressions":{"hubfirewall":{"references":["module.hub.hubfirewall","module.hub"]},"hubvnet":{"references":["module.hub.hubvnet","module.hub"]},"metastoreip":{"references":["var.metastoreip"]},"rglocation":{"references":["var.rglocation"]},"spokecidr":{"references":["var.spokecidr"]},"tags":{"references":["var.tags"]},"workspace_prefix":{"references":["var.workspace_prefix"]}},"module":{"outputs":{"databricks_azure_workspace_resource_id":{"expression":{"references":["azurerm_databricks_workspace.this.id","azurerm_databricks_workspace.this"]},"description":"The ID of the Databricks Workspace in the Azure management plane."},"my_ip_addr":{"expression":{"references":["local.ifconfig_co_json.ip","local.ifconfig_co_json"]},"description":"IP address of caller"},"test_vm_public_ip":{"expression":{"references":["azurerm_public_ip.testvmpublicip.ip_address","azurerm_public_ip.testvmpublicip"]},"description":"Public IP of the created virtual machine"},"workspace_url":{"expression":{"references":["azurerm_databricks_workspace.this.workspace_url","azurerm_databricks_workspace.this"]},"description":"The workspace URL which is of the format 'adb-{workspaceId}.{random}.azuredatabricks.net'"}},"resources":[{"address":"azurerm_databricks_workspace.this","mode":"managed","type":"azurerm_databricks_workspace","name":"this","provider_config_key":"azurerm","expressions":{"custom_parameters":[{"no_public_ip":{"constant_value":true},"private_subnet_name":{"references":["azurerm_subnet.private.name","azurerm_subnet.private"]},"private_subnet_network_security_group_association_id":{"references":["azurerm_subnet_network_security_group_association.private.id","azurerm_subnet_network_security_group_association.private"]},"public_subnet_name":{"references":["azurerm_subnet.public.name","azurerm_subnet.public"]},"public_subnet_network_security_group_association_id":{"references":["azurerm_subnet_network_security_group_association.public.id","azurerm_subnet_network_security_group_association.public"]},"storage_account_name":{"references":["local.dbfsname"]},"virtual_network_id":{"references":["azurerm_virtual_network.this.id","azurerm_virtual_network.this"]}}],"customer_managed_key_enabled":{"constant_value":true},"location":{"references":["azurerm_resource_group.this.location","azurerm_resource_group.this"]},"name":{"references":["local.prefix"]},"network_security_group_rules_required":{"constant_value":"NoAzureDatabricksRules"},"public_network_access_enabled":{"constant_value":false},"resource_group_name":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]},"sku":{"constant_value":"premium"},"tags":{"references":["local.tags"]}},"schema_version":0,"depends_on":["azurerm_subnet_network_security_group_association.public","azurerm_subnet_network_security_group_association.private"]},{"address":"azurerm_firewall_application_rule_collection.adbfqdn","mode":"managed","type":"azurerm_firewall_application_rule_collection","name":"adbfqdn","provider_config_key":"azurerm","expressions":{"action":{"constant_value":"Allow"},"azure_firewall_name":{"references":["var.hubfirewall.name","var.hubfirewall"]},"name":{"constant_value":"adbcontrolplanefqdn"},"priority":{"constant_value":200},"resource_group_name":{"references":["var.hubvnet.resource_group_name","var.hubvnet"]},"rule":[{"name":{"constant_value":"databricks-control-plane-services"},"protocol":[{"port":{"constant_value":"443"},"type":{"constant_value":"Https"}}],"source_addresses":{"references":["azurerm_subnet.public.address_prefixes","azurerm_subnet.public","azurerm_subnet.private.address_prefixes","azurerm_subnet.private"]},"target_fqdns":{"references":["var.hubfirewall.ip_configuration[0].private_ip_address","var.hubfirewall.ip_configuration[0]","var.hubfirewall.ip_configuration","var.hubfirewall"]}}]},"schema_version":0},{"address":"azurerm_firewall_network_rule_collection.adbfnetwork","mode":"managed","type":"azurerm_firewall_network_rule_collection","name":"adbfnetwork","provider_config_key":"azurerm","expressions":{"action":{"constant_value":"Allow"},"azure_firewall_name":{"references":["var.hubfirewall.name","var.hubfirewall"]},"name":{"constant_value":"adbcontrolplanenetwork"},"priority":{"constant_value":200},"resource_group_name":{"references":["var.hubfirewall.resource_group_name","var.hubfirewall"]},"rule":[{"destination_addresses":{"references":["var.metastoreip","var.metastoreip"]},"destination_ports":{"constant_value":["3306"]},"name":{"constant_value":"databricks-metastore"},"protocols":{"constant_value":["TCP"]},"source_addresses":{"references":["azurerm_subnet.public.address_prefixes","azurerm_subnet.public","azurerm_subnet.private.address_prefixes","azurerm_subnet.private"]}}]},"schema_version":0},{"address":"azurerm_network_interface.testvmnic","mode":"managed","type":"azurerm_network_interface","name":"testvmnic","provider_config_key":"azurerm","expressions":{"ip_configuration":[{"name":{"constant_value":"testvmip"},"private_ip_address_allocation":{"constant_value":"Dynamic"},"public_ip_address_id":{"references":["azurerm_public_ip.testvmpublicip.id","azurerm_public_ip.testvmpublicip"]},"subnet_id":{"references":["azurerm_subnet.testvmsubnet.id","azurerm_subnet.testvmsubnet"]}}],"location":{"references":["azurerm_resource_group.this.location","azurerm_resource_group.this"]},"name":{"references":["local.prefix"]},"resource_group_name":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]}},"schema_version":0},{"address":"azurerm_network_interface_security_group_association.testvmnsgassoc","mode":"managed","type":"azurerm_network_interface_security_group_association","name":"testvmnsgassoc","provider_config_key":"azurerm","expressions":{"network_interface_id":{"references":["azurerm_network_interface.testvmnic.id","azurerm_network_interface.testvmnic"]},"network_security_group_id":{"references":["azurerm_network_security_group.testvm-nsg.id","azurerm_network_security_group.testvm-nsg"]}},"schema_version":0},{"address":"azurerm_network_security_group.testvm-nsg","mode":"managed","type":"azurerm_network_security_group","name":"testvm-nsg","provider_config_key":"azurerm","expressions":{"location":{"references":["azurerm_resource_group.this.location","azurerm_resource_group.this"]},"name":{"references":["local.prefix"]},"resource_group_name":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]},"tags":{"references":["local.tags"]}},"schema_version":0},{"address":"azurerm_network_security_group.this","mode":"managed","type":"azurerm_network_security_group","name":"this","provider_config_key":"azurerm","expressions":{"location":{"references":["azurerm_resource_group.this.location","azurerm_resource_group.this"]},"name":{"references":["local.prefix"]},"resource_group_name":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]},"tags":{"references":["local.tags"]}},"schema_version":0},{"address":"azurerm_network_security_rule.aad","mode":"managed","type":"azurerm_network_security_rule","name":"aad","provider_config_key":"azurerm","expressions":{"access":{"constant_value":"Allow"},"destination_address_prefix":{"constant_value":"AzureActiveDirectory"},"destination_port_range":{"constant_value":"443"},"direction":{"constant_value":"Outbound"},"name":{"constant_value":"AllowAAD"},"network_security_group_name":{"references":["azurerm_network_security_group.this.name","azurerm_network_security_group.this"]},"priority":{"constant_value":200},"protocol":{"constant_value":"Tcp"},"resource_group_name":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]},"source_address_prefix":{"constant_value":"VirtualNetwork"},"source_port_range":{"constant_value":"*"}},"schema_version":0},{"address":"azurerm_network_security_rule.azfrontdoor","mode":"managed","type":"azurerm_network_security_rule","name":"azfrontdoor","provider_config_key":"azurerm","expressions":{"access":{"constant_value":"Allow"},"destination_address_prefix":{"constant_value":"AzureFrontDoor.Frontend"},"destination_port_range":{"constant_value":"443"},"direction":{"constant_value":"Outbound"},"name":{"constant_value":"AllowAzureFrontDoor"},"network_security_group_name":{"references":["azurerm_network_security_group.this.name","azurerm_network_security_group.this"]},"priority":{"constant_value":201},"protocol":{"constant_value":"Tcp"},"resource_group_name":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]},"source_address_prefix":{"constant_value":"VirtualNetwork"},"source_port_range":{"constant_value":"*"}},"schema_version":0},{"address":"azurerm_network_security_rule.test0","mode":"managed","type":"azurerm_network_security_rule","name":"test0","provider_config_key":"azurerm","expressions":{"access":{"constant_value":"Allow"},"destination_address_prefix":{"constant_value":"VirtualNetwork"},"destination_port_range":{"constant_value":"3389"},"direction":{"constant_value":"Inbound"},"name":{"constant_value":"RDP"},"network_security_group_name":{"references":["azurerm_network_security_group.testvm-nsg.name","azurerm_network_security_group.testvm-nsg"]},"priority":{"constant_value":200},"protocol":{"constant_value":"Tcp"},"resource_group_name":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]},"source_address_prefixes":{"references":["local.ifconfig_co_json.ip","local.ifconfig_co_json"]},"source_port_range":{"constant_value":"*"}},"schema_version":0},{"address":"azurerm_private_dns_zone.dnsdbfs_blob","mode":"managed","type":"azurerm_private_dns_zone","name":"dnsdbfs_blob","provider_config_key":"azurerm","expressions":{"name":{"constant_value":"privatelink.blob.core.windows.net"},"resource_group_name":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]}},"schema_version":0},{"address":"azurerm_private_dns_zone.dnsdbfs_dfs","mode":"managed","type":"azurerm_private_dns_zone","name":"dnsdbfs_dfs","provider_config_key":"azurerm","expressions":{"name":{"constant_value":"privatelink.dfs.core.windows.net"},"resource_group_name":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]}},"schema_version":0},{"address":"azurerm_private_dns_zone.dnsdpcp","mode":"managed","type":"azurerm_private_dns_zone","name":"dnsdpcp","provider_config_key":"azurerm","expressions":{"name":{"constant_value":"privatelink.azuredatabricks.net"},"resource_group_name":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]}},"schema_version":0},{"address":"azurerm_private_dns_zone_virtual_network_link.dbfsdnszonevnetlink_blob","mode":"managed","type":"azurerm_private_dns_zone_virtual_network_link","name":"dbfsdnszonevnetlink_blob","provider_config_key":"azurerm","expressions":{"name":{"constant_value":"dbfsspokevnetconnection-blob"},"private_dns_zone_name":{"references":["azurerm_private_dns_zone.dnsdbfs_blob.name","azurerm_private_dns_zone.dnsdbfs_blob"]},"resource_group_name":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]},"virtual_network_id":{"references":["azurerm_virtual_network.this.id","azurerm_virtual_network.this"]}},"schema_version":0},{"address":"azurerm_private_dns_zone_virtual_network_link.dbfsdnszonevnetlink_dfs","mode":"managed","type":"azurerm_private_dns_zone_virtual_network_link","name":"dbfsdnszonevnetlink_dfs","provider_config_key":"azurerm","expressions":{"name":{"constant_value":"dbfsspokevnetconnection-dfs"},"private_dns_zone_name":{"references":["azurerm_private_dns_zone.dnsdbfs_dfs.name","azurerm_private_dns_zone.dnsdbfs_dfs"]},"resource_group_name":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]},"virtual_network_id":{"references":["azurerm_virtual_network.this.id","azurerm_virtual_network.this"]}},"schema_version":0},{"address":"azurerm_private_dns_zone_virtual_network_link.dpcpdnszonevnetlink","mode":"managed","type":"azurerm_private_dns_zone_virtual_network_link","name":"dpcpdnszonevnetlink","provider_config_key":"azurerm","expressions":{"name":{"constant_value":"dpcpspokevnetconnection"},"private_dns_zone_name":{"references":["azurerm_private_dns_zone.dnsdpcp.name","azurerm_private_dns_zone.dnsdpcp"]},"resource_group_name":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]},"virtual_network_id":{"references":["azurerm_virtual_network.this.id","azurerm_virtual_network.this"]}},"schema_version":0},{"address":"azurerm_private_endpoint.auth","mode":"managed","type":"azurerm_private_endpoint","name":"auth","provider_config_key":"azurerm","expressions":{"location":{"references":["azurerm_resource_group.this.location","azurerm_resource_group.this"]},"name":{"constant_value":"aadauthpvtendpoint"},"private_dns_zone_group":[{"name":{"constant_value":"private-dns-zone-auth"},"private_dns_zone_ids":{"references":["azurerm_private_dns_zone.dnsdpcp.id","azurerm_private_dns_zone.dnsdpcp"]}}],"private_service_connection":[{"is_manual_connection":{"constant_value":false},"name":{"references":["var.workspace_prefix"]},"private_connection_resource_id":{"references":["azurerm_databricks_workspace.this.id","azurerm_databricks_workspace.this"]},"subresource_names":{"constant_value":["browser_authentication"]}}],"resource_group_name":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]},"subnet_id":{"references":["azurerm_subnet.plsubnet.id","azurerm_subnet.plsubnet"]}},"schema_version":0},{"address":"azurerm_private_endpoint.dbfspe_blob","mode":"managed","type":"azurerm_private_endpoint","name":"dbfspe_blob","provider_config_key":"azurerm","expressions":{"location":{"references":["azurerm_resource_group.this.location","azurerm_resource_group.this"]},"name":{"constant_value":"dbfspvtendpoint-blob"},"private_dns_zone_group":[{"name":{"constant_value":"private-dns-zone-dbfs"},"private_dns_zone_ids":{"references":["azurerm_private_dns_zone.dnsdbfs_blob.id","azurerm_private_dns_zone.dnsdbfs_blob"]}}],"private_service_connection":[{"is_manual_connection":{"constant_value":false},"name":{"references":["var.workspace_prefix"]},"private_connection_resource_id":{"references":["azurerm_databricks_workspace.this.managed_resource_group_id","azurerm_databricks_workspace.this","local.dbfsname"]},"subresource_names":{"constant_value":["blob"]}}],"resource_group_name":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]},"subnet_id":{"references":["azurerm_subnet.plsubnet.id","azurerm_subnet.plsubnet"]}},"schema_version":0},{"address":"azurerm_private_endpoint.dbfspe_dfs","mode":"managed","type":"azurerm_private_endpoint","name":"dbfspe_dfs","provider_config_key":"azurerm","expressions":{"location":{"references":["azurerm_resource_group.this.location","azurerm_resource_group.this"]},"name":{"constant_value":"dbfspvtendpoint-dfs"},"private_dns_zone_group":[{"name":{"constant_value":"private-dns-zone-dbfs"},"private_dns_zone_ids":{"references":["azurerm_private_dns_zone.dnsdbfs_dfs.id","azurerm_private_dns_zone.dnsdbfs_dfs"]}}],"private_service_connection":[{"is_manual_connection":{"constant_value":false},"name":{"references":["var.workspace_prefix"]},"private_connection_resource_id":{"references":["azurerm_databricks_workspace.this.managed_resource_group_id","azurerm_databricks_workspace.this","local.dbfsname"]},"subresource_names":{"constant_value":["dfs"]}}],"resource_group_name":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]},"subnet_id":{"references":["azurerm_subnet.plsubnet.id","azurerm_subnet.plsubnet"]}},"schema_version":0},{"address":"azurerm_private_endpoint.dpcp","mode":"managed","type":"azurerm_private_endpoint","name":"dpcp","provider_config_key":"azurerm","expressions":{"location":{"references":["azurerm_resource_group.this.location","azurerm_resource_group.this"]},"name":{"constant_value":"dpcppvtendpoint"},"private_dns_zone_group":[{"name":{"constant_value":"private-dns-zone-dpcp"},"private_dns_zone_ids":{"references":["azurerm_private_dns_zone.dnsdpcp.id","azurerm_private_dns_zone.dnsdpcp"]}}],"private_service_connection":[{"is_manual_connection":{"constant_value":false},"name":{"references":["var.workspace_prefix"]},"private_connection_resource_id":{"references":["azurerm_databricks_workspace.this.id","azurerm_databricks_workspace.this"]},"subresource_names":{"constant_value":["databricks_ui_api"]}}],"resource_group_name":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]},"subnet_id":{"references":["azurerm_subnet.plsubnet.id","azurerm_subnet.plsubnet"]}},"schema_version":0},{"address":"azurerm_public_ip.testvmpublicip","mode":"managed","type":"azurerm_public_ip","name":"testvmpublicip","provider_config_key":"azurerm","expressions":{"allocation_method":{"constant_value":"Static"},"location":{"references":["azurerm_resource_group.this.location","azurerm_resource_group.this"]},"name":{"references":["local.prefix"]},"resource_group_name":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]},"sku":{"constant_value":"Standard"}},"schema_version":0},{"address":"azurerm_resource_group.this","mode":"managed","type":"azurerm_resource_group","name":"this","provider_config_key":"azurerm","expressions":{"location":{"references":["local.location"]},"name":{"references":["local.prefix"]},"tags":{"references":["local.tags"]}},"schema_version":0},{"address":"azurerm_route_table.adbroute","mode":"managed","type":"azurerm_route_table","name":"adbroute","provider_config_key":"azurerm","expressions":{"location":{"references":["azurerm_resource_group.this.location","azurerm_resource_group.this"]},"name":{"constant_value":"spoke-routetable"},"resource_group_name":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]},"route":{"references":["var.hubfirewall.ip_configuration[0].private_ip_address","var.hubfirewall.ip_configuration[0]","var.hubfirewall.ip_configuration","var.hubfirewall"]}},"schema_version":0},{"address":"azurerm_subnet.plsubnet","mode":"managed","type":"azurerm_subnet","name":"plsubnet","provider_config_key":"azurerm","expressions":{"address_prefixes":{"references":["local.cidr"]},"name":{"references":["local.prefix"]},"private_endpoint_network_policies":{"constant_value":"Enabled"},"resource_group_name":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]},"virtual_network_name":{"references":["azurerm_virtual_network.this.name","azurerm_virtual_network.this"]}},"schema_version":0},{"address":"azurerm_subnet.private","mode":"managed","type":"azurerm_subnet","name":"private","provider_config_key":"azurerm","expressions":{"address_prefixes":{"references":["local.cidr"]},"delegation":[{"name":{"constant_value":"databricks"},"service_delegation":[{"actions":{"constant_value":["Microsoft.Network/virtualNetworks/subnets/join/action","Microsoft.Network/virtualNetworks/subnets/prepareNetworkPolicies/action","Microsoft.Network/virtualNetworks/subnets/unprepareNetworkPolicies/action"]},"name":{"constant_value":"Microsoft.Databricks/workspaces"}}]}],"name":{"references":["local.prefix"]},"private_endpoint_network_policies":{"constant_value":"Enabled"},"resource_group_name":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]},"service_endpoints":{"references":["var.private_subnet_endpoints"]},"virtual_network_name":{"references":["azurerm_virtual_network.this.name","azurerm_virtual_network.this"]}},"schema_version":0},{"address":"azurerm_subnet.public","mode":"managed","type":"azurerm_subnet","name":"public","provider_config_key":"azurerm","expressions":{"address_prefixes":{"references":["local.cidr"]},"delegation":[{"name":{"constant_value":"databricks"},"service_delegation":[{"actions":{"constant_value":["Microsoft.Network/virtualNetworks/subnets/join/action","Microsoft.Network/virtualNetworks/subnets/prepareNetworkPolicies/action","Microsoft.Network/virtualNetworks/subnets/unprepareNetworkPolicies/action"]},"name":{"constant_value":"Microsoft.Databricks/workspaces"}}]}],"name":{"references":["local.prefix"]},"resource_group_name":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]},"virtual_network_name":{"references":["azurerm_virtual_network.this.name","azurerm_virtual_network.this"]}},"schema_version":0},{"address":"azurerm_subnet.testvmsubnet","mode":"managed","type":"azurerm_subnet","name":"testvmsubnet","provider_config_key":"azurerm","expressions":{"address_prefixes":{"references":["local.cidr"]},"name":{"references":["local.prefix"]},"resource_group_name":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]},"virtual_network_name":{"references":["azurerm_virtual_network.this.name","azurerm_virtual_network.this"]}},"schema_version":0},{"address":"azurerm_subnet_network_security_group_association.private","mode":"managed","type":"azurerm_subnet_network_security_group_association","name":"private","provider_config_key":"azurerm","expressions":{"network_security_group_id":{"references":["azurerm_network_security_group.this.id","azurerm_network_security_group.this"]},"subnet_id":{"references":["azurerm_subnet.private.id","azurerm_subnet.private"]}},"schema_version":0},{"address":"azurerm_subnet_network_security_group_association.public","mode":"managed","type":"azurerm_subnet_network_security_group_association","name":"public","provider_config_key":"azurerm","expressions":{"network_security_group_id":{"references":["azurerm_network_security_group.this.id","azurerm_network_security_group.this"]},"subnet_id":{"references":["azurerm_subnet.public.id","azurerm_subnet.public"]}},"schema_version":0},{"address":"azurerm_subnet_route_table_association.privateudr","mode":"managed","type":"azurerm_subnet_route_table_association","name":"privateudr","provider_config_key":"azurerm","expressions":{"route_table_id":{"references":["azurerm_route_table.adbroute.id","azurerm_route_table.adbroute"]},"subnet_id":{"references":["azurerm_subnet.private.id","azurerm_subnet.private"]}},"schema_version":0},{"address":"azurerm_subnet_route_table_association.publicudr","mode":"managed","type":"azurerm_subnet_route_table_association","name":"publicudr","provider_config_key":"azurerm","expressions":{"route_table_id":{"references":["azurerm_route_table.adbroute.id","azurerm_route_table.adbroute"]},"subnet_id":{"references":["azurerm_subnet.public.id","azurerm_subnet.public"]}},"schema_version":0},{"address":"azurerm_virtual_network.this","mode":"managed","type":"azurerm_virtual_network","name":"this","provider_config_key":"azurerm","expressions":{"address_space":{"references":["local.cidr"]},"location":{"references":["azurerm_resource_group.this.location","azurerm_resource_group.this"]},"name":{"references":["local.prefix"]},"resource_group_name":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]},"tags":{"references":["local.tags"]}},"schema_version":0},{"address":"azurerm_virtual_network_peering.hubvnet","mode":"managed","type":"azurerm_virtual_network_peering","name":"hubvnet","provider_config_key":"azurerm","expressions":{"name":{"constant_value":"peerhubtospoke"},"remote_virtual_network_id":{"references":["var.hubvnet.id","var.hubvnet"]},"resource_group_name":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]},"virtual_network_name":{"references":["var.hubvnet.name","var.hubvnet"]}},"schema_version":0},{"address":"azurerm_virtual_network_peering.spokevnet","mode":"managed","type":"azurerm_virtual_network_peering","name":"spokevnet","provider_config_key":"azurerm","expressions":{"name":{"constant_value":"peerspoketohub"},"remote_virtual_network_id":{"references":["var.hubvnet.id","var.hubvnet"]},"resource_group_name":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]},"virtual_network_name":{"references":["azurerm_virtual_network.this.name","azurerm_virtual_network.this"]}},"schema_version":0},{"address":"azurerm_windows_virtual_machine.testvm","mode":"managed","type":"azurerm_windows_virtual_machine","name":"testvm","provider_config_key":"azurerm","expressions":{"admin_password":{"references":["var.test_vm_password"]},"admin_username":{"constant_value":"azureuser"},"location":{"references":["azurerm_resource_group.this.location","azurerm_resource_group.this"]},"name":{"references":["local.prefix"]},"network_interface_ids":{"references":["azurerm_network_interface.testvmnic.id","azurerm_network_interface.testvmnic"]},"os_disk":[{"caching":{"constant_value":"ReadWrite"},"storage_account_type":{"constant_value":"Standard_LRS"}}],"resource_group_name":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]},"size":{"constant_value":"Standard_F4s_v2"},"source_image_reference":[{"offer":{"constant_value":"windows-10"},"publisher":{"constant_value":"MicrosoftWindowsDesktop"},"sku":{"constant_value":"19h2-pro-g2"},"version":{"constant_value":"latest"}}]},"schema_version":0},{"address":"random_string.naming","mode":"managed","type":"random_string","name":"naming","provider_config_key":"module.spoke:random","expressions":{"length":{"constant_value":6},"special":{"constant_value":false},"upper":{"constant_value":false}},"schema_version":2},{"address":"data.azurerm_client_config.current","mode":"data","type":"azurerm_client_config","name":"current","provider_config_key":"azurerm","schema_version":0},{"address":"data.external.me","mode":"data","type":"external","name":"me","provider_config_key":"module.spoke:external","expressions":{"program":{"constant_value":["az","account","show","--query","user"]}},"schema_version":0},{"address":"data.http.my_public_ip","mode":"data","type":"http","name":"my_public_ip","provider_config_key":"module.spoke:http","expressions":{"request_headers":{"constant_value":{"Accept":"application/json"}},"url":{"constant_value":"https://ifconfig.co/json"}},"schema_version":0}],"variables":{"dbfs_prefix":{"default":"dbfs","description":"Prefix for DBFS storage account name"},"hubfirewall":{},"hubvnet":{},"metastoreip":{"description":"IP Address of built-in Hive Metastore in the target region"},"private_subnet_endpoints":{"default":[],"description":"The list of Service endpoints to associate with the private subnet."},"rglocation":{"default":"uksouth","description":"Location of resource group to create"},"spokecidr":{"default":"10.179.0.0/20","description":"CIDR for Spoke VNet"},"tags":{"default":{},"description":"map of tags to add to all resources"},"test_vm_password":{"default":"TesTed567!!!","description":"Password for Test VM"},"workspace_prefix":{"default":"adb","description":"Prefix to use for Workspace name"}}}}},"variables":{"hubcidr":{"default":"10.178.0.0/20","description":"CIDR for Hub VNet"},"metastoreip":{"default":null,"description":"IP Address of built-in Hive Metastore in the target region"},"rglocation":{"description":"Location for the resource group"},"spokecidr":{"default":"10.179.0.0/20","description":"CIDR for Spoke VNet"},"subscription_id":{"description":"Subscription ID of Azure"},"tags":{"description":"Tags to apply to resources"},"workspace_prefix":{"description":"Prefix for the workspace resources"}}}},"relevant_attributes":[{"resource":"module.spoke.azurerm_private_dns_zone.dnsdpcp","attribute":["id"]},{"resource":"module.spoke.azurerm_private_dns_zone.dnsdpcp","attribute":["name"]},{"resource":"module.spoke.azurerm_public_ip.testvmpublicip","attribute":["id"]},{"resource":"module.spoke.azurerm_subnet.private","attribute":["name"]},{"resource":"module.spoke.azurerm_virtual_network.this","attribute":["id"]},{"resource":"module.spoke.azurerm_subnet_network_security_group_association.public","attribute":["id"]},{"resource":"module.spoke.data.external.me","attribute":["result"]},{"resource":"module.spoke.azurerm_private_dns_zone.dnsdbfs_dfs","attribute":["name"]},{"resource":"module.spoke.azurerm_network_security_group.testvm-nsg","attribute":["name"]},{"resource":"module.hub.data.external.me","attribute":["result"]},{"resource":"module.spoke.azurerm_network_security_group.this","attribute":["name"]},{"resource":"module.hub.azurerm_virtual_network.hubvnet","attribute":["name"]},{"resource":"module.spoke.azurerm_subnet.public","attribute":["id"]},{"resource":"module.spoke.azurerm_subnet.private","attribute":["id"]},{"resource":"module.spoke.azurerm_subnet.testvmsubnet","attribute":["id"]},{"resource":"module.hub.azurerm_resource_group.this","attribute":["name"]},{"resource":"module.spoke.azurerm_private_dns_zone.dnsdbfs_blob","attribute":["name"]},{"resource":"module.spoke.azurerm_virtual_network.this","attribute":["name"]},{"resource":"module.hub.azurerm_subnet.hubfw","attribute":["id"]},{"resource":"module.spoke.azurerm_network_interface.testvmnic","attribute":["id"]},{"resource":"module.spoke.data.http.my_public_ip","attribute":["response_body"]},{"resource":"module.spoke.azurerm_databricks_workspace.this","attribute":["managed_resource_group_id"]},{"resource":"module.spoke.azurerm_private_dns_zone.dnsdbfs_blob","attribute":["id"]},{"resource":"module.hub.azurerm_virtual_network.hubvnet","attribute":[]},{"resource":"module.hub.azurerm_firewall.hubfw","attribute":["ip_configuration",0,"private_ip_address"]},{"resource":"module.spoke.azurerm_databricks_workspace.this","attribute":["workspace_url"]},{"resource":"module.spoke.azurerm_subnet.private","attribute":["address_prefixes"]},{"resource":"module.spoke.azurerm_subnet.public","attribute":["name"]},{"resource":"module.spoke.azurerm_route_table.adbroute","attribute":["id"]},{"resource":"module.spoke.azurerm_databricks_workspace.this","attribute":["id"]},{"resource":"module.spoke.azurerm_private_dns_zone.dnsdbfs_dfs","attribute":["id"]},{"resource":"module.hub.random_string.naming","attribute":["result"]},{"resource":"module.spoke.random_string.naming","attribute":["result"]},{"resource":"module.hub.azurerm_resource_group.this","attribute":["location"]},{"resource":"module.spoke.azurerm_network_security_group.testvm-nsg","attribute":["id"]},{"resource":"module.spoke.azurerm_subnet_network_security_group_association.private","attribute":["id"]},{"resource":"module.spoke.azurerm_public_ip.testvmpublicip","attribute":["ip_address"]},{"resource":"module.spoke.azurerm_resource_group.this","attribute":["location"]},{"resource":"module.hub.azurerm_public_ip.fwpublicip","attribute":["id"]},{"resource":"module.spoke.azurerm_subnet.plsubnet","attribute":["id"]},{"resource":"module.hub.azurerm_firewall.hubfw","attribute":[]},{"resource":"module.spoke.azurerm_resource_group.this","attribute":["name"]},{"resource":"module.spoke.azurerm_network_security_group.this","attribute":["id"]},{"resource":"module.spoke.azurerm_subnet.public","attribute":["address_prefixes"]}],"timestamp":"2025-01-13T08:16:13Z","applyable":true,"complete":true,"errored":false}
